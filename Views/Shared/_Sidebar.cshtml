@using Microsoft.AspNetCore.Identity

@using Utal.Icc.Mm.Mvc.Models

@inject UserManager<IccUser> _userManager

@{
	var user = await this._userManager.GetUserAsync(this.User);
}

<div id="sidebar" class="app-sidebar">
	<div class="app-sidebar-content" data-scrollbar="true" data-height="100%">
		<div class="menu">
			@if (!this.User.Identity!.IsAuthenticated || user is null) {
				<div class="menu-header">
					Debes iniciar sesión para visualizar tus roles y herramientas
				</div>
			} else if (!user!.IsDeactivated) {
				<div class="menu-header">
					Mis roles y herramientas
				</div>
				@if (user is IccTeacher) {
					@if (this.User.IsInRole("Director")) {
						<div class="menu-item has-sub">
							<a href="#" class="menu-link">
								<span class="menu-icon"><i class="fa fa-university"></i></span>
								<span class="menu-text">Director de carrera</span>
								<span class="menu-caret"><b class="caret"></b></span>
							</a>
							<div class="menu-submenu">
								<div class="menu-item">
									<a href="@this.Url.Action("Students", "User")" class="menu-link">
										<span class="menu-text">Estudiantes</span>
									</a>
								</div>
								<div class="menu-item">
									<a href="@this.Url.Action("Teachers", "User")" class="menu-link">
										<span class="menu-text">Profesores</span>
									</a>
								</div>
								<div class="menu-item">
									<a href="@this.Url.Action("Requests", "Memoir")" class="menu-link">
										<span class="menu-text">Solicitudes</span>
									</a>
								</div>
							</div>
						</div>
					}
					@if (this.User.IsInRole("Committee")) {
						<div class="menu-item has-sub">
							<a href="#" class="menu-link">
								<span class="menu-icon"><i class="fa fa-people-line"></i></span>
								<span class="menu-text">Profesor del comité</span>
								<span class="menu-caret"><b class="caret"></b></span>
							</a>
							<div class="menu-submenu">
								<div class="menu-item">
									<a href="@this.Url.Action("Requests", "Memoir")" class="menu-link">
										<span class="menu-text">Solicitudes</span>
									</a>
								</div>
							</div>
						</div>
					}
					@if (this.User.IsInRole("Guide")) {
						<div class="menu-item has-sub">
							<a href="#" class="menu-link">
								<span class="menu-icon"><i class="fa fa-user-tie"></i></span>
								<span class="menu-text">Profesor guía</span>
								<span class="menu-caret"><b class="caret"></b></span>
							</a>
							<div class="menu-submenu">
								<div class="menu-item">
									<a href="@this.Url.Action("Proposals", "Memoir")" class="menu-link">
										<span class="menu-text">Mis propuestas</span>
									</a>
								</div>
								<div class="menu-item">
									<a href="@this.Url.Action("Proposals", "Memoir")" class="menu-link">
										<span class="menu-text">Propuestas de estudiantes</span>
									</a>
								</div>
								<div class="menu-item">
									<a href="@this.Url.Action("Requests", "Memoir")" class="menu-link">
										<span class="menu-text">Nuestras solicitudes</span>
									</a>
								</div>
								<div class="menu-item">
									<a href="@this.Url.Action("Students", "Memoir")" class="menu-link">
										<span class="menu-text">Mis memoristas</span>
									</a>
								</div>
							</div>
						</div>
					}
				} else if (user is IccStudent) {
					@if (this.User.IsInRole("Complete")) {
						<div class="menu-item">
							<a href="#" class="menu-link">
								<span class="menu-icon"><i class="fa fa-user-graduate"></i></span>
								<span class="menu-text">Carrera completada</span>
							</a>
						</div>
					}
					@if (this.User.IsInRole("Memorist")) {
						<div class="menu-item has-sub">
							<a href="#" class="menu-link">
								<span class="menu-icon"><i class="fa fa-user-graduate"></i></span>
								<span class="menu-text">Memorista</span>
								<span class="menu-caret"><b class="caret"></b></span>
							</a>
							<div class="menu-submenu">
								<div class="menu-item">
									<a href="@this.Url.Action("My", "Memoir")" class="menu-link">
										<span class="menu-text">Mi memoria de título</span>
									</a>
								</div>
							</div>
						</div>
					}
					@if (!this.User.IsInRole("Memorist")) {
						<div class="menu-item has-sub">
							<a href="#" class="menu-link">
								<span class="menu-icon"><i class="fa fa-user-graduate"></i></span>
								<span class="menu-text">Estudiante</span>
								<span class="menu-caret"><b class="caret"></b></span>
							</a>
							<div class="menu-submenu">
								<div class="menu-item">
									<a href="@this.Url.Action("Proposals", "Memoir")" class="menu-link">
										<span class="menu-text">Mis propuestas</span>
									</a>
								</div>
								<div class="menu-item">
									<a href="@this.Url.Action("Publications", "Memoir")" class="menu-link">
										<span class="menu-text">Propuestas de profesores guía</span>
									</a>
								</div>
								<div class="menu-item">
									<a href="@this.Url.Action("Applications", "Memoir")" class="menu-link">
										<span class="menu-text">Mis postulaciones</span>
									</a>
								</div>
								<div class="menu-item">
									<a href="@this.Url.Action("Requests", "Memoir")" class="menu-link">
										<span class="menu-text">Nuestras solicitudes</span>
									</a>
								</div>
							</div>
						</div>
					}
				}
			} else if (user.IsDeactivated) {
				<div class="menu-header">
					Cuenta desactivada
				</div>
			}
		</div>
	</div>
	<button class="app-sidebar-mobile-backdrop" data-dismiss="sidebar-mobile"></button>
</div>